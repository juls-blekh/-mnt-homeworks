# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Основная часть

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информация о сбое: 

* [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/);
* [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


---
## Ответ

Название | Описание
--- | ---
Краткое описание инцидента |В 22:52 (21.10.2018г.) по UTC на нескольких сервисах GitHub.com пострадали несколько сетевых разделов и последующим сбоем базы данных, что привело к появлению непоследовательной информации веб-сайте github.com.   
Предшествующие события |В 22:52 UTC 21 октября плановые работы по техническому обслуживанию для замены вышедшего из строя оптического оборудования 100G. 
Причина инцидента | Потеря связи между сетевым узлом на Восточном побережье США и основным центром обработки данных на Восточном побережье США на 43 секунды.
Воздействие | Приостановлена доставка webhooks и сборок GitHub Pages
Обнаружение | Внутренние системы мониторинга начали генерировать предупреждения, указывающие на то, что в системах наблюдались многочисленные сбои, инженеры из команды первого реагирования определили, что топологии для многочисленных кластеров баз данных находятся в неожиданном состоянии. Были привлечены координатор и дополнительные инженеры из команды разработчиков баз данных GitHub
Реакция | Ответственные разработчики полностью устранили инцидент за 24 часа 11 минут
Восстановление | Прекращено выполнение заданий, которые записывают метаданные, после чего реализован план, состоящий в том, чтобы восстановить данные из резервных копий, синхронизировать реплики на Восточном и Западном центрах обработки данных, вернуться к стабильной топологии обслуживания, а затем возобновить обработку заданий, поставленных в очередь.
Таймлайн | `21 октября 2018 22:52 UTC`Потеря связи между сетевым узлом на Восточном побережье США и основным центром обработки данных на Восточном побережье США.</br>`21 октября 2018 22:54 UTC` Обнаружение многочисленных сбоев системой мониторинга.</br>`21 октября 2018 23:07 UTC` Команда реагирования решила вручную заблокировать наш внутренний инструмент развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений.</br>`21 октября 2018 23:09 UTC` команда реагирования присвоила сайту желтый статус.</br>`21 октября 2018 23:11 UTC` присоединился координатор инцидента и через две минуты изменил решение на красный статус.</br>`21 октября 2018 23:13 UTC`  В целях сохранности данных принято решение об остановке выполнения заданий, которые пишут метаданные.</br>`21 октября 2018 23:19 UTC` приостановка доставки webhook и сборки GitHub Pages</br>`22 октября 2018 00:05 UTC` Инженеры из группы реагирования начали разрабатывать план устранения несогласованности данных и запустили процедуры отработки отказа для MySQL.</br>`22 октября 2018 00:41 UTC` Запущен процесс резервного копирования для всех затронутых кластеров MySQL.</br>`22 октября 2018 06:51 UTC` Несколько кластеров завершили восстановление из резервных копий в центре обработки данных на Восточном побережье США и начали репликацию новых данных с Западного побережья.</br>`22 октября 2018 07:46 UTC` GitHub опубликовал сообщение в блоге, чтобы предоставить больше контекста.</br>`22 октября 2018 11:12 UTC` Все первичные базы данных снова были установлены на Восточном побережье США.</br>`22 октября 2018 13:15 UTC` Задержки репликации увеличиваются, вместо того чтобы уменьшаться до согласованного состояния. Начали предоставлять дополнительные реплики MySQL для чтения в общедоступном облаке Восточного побережья США.</br>`22 октября 2018 16:24 UTC` Реплики были синхронизированы, выполнен переход на исходную топологию, решив непосредственные проблемы с задержкой / доступностью.</br>`22 октября 2018 16:45 UTC` Балансировка возросшей нагрузки, корректировка TTL истекших за время восстановления задач.</br>`22 октября 2018 23:03 UTC` Все ожидающие webhooks и сборки GitHub Pages были обработаны, целостность и надлежащая работа всех систем подтверждены. Статус сайта обновлен до зеленого.
Последующие действия |Устранение несоответствий в данных;</br>Информационные материалы - стремление предоставлять более точную информацию об инцидентах в будущем;</br>Технические инициативы:</br>1.Изменение конфигурации Orchestrator.</br>2. Переход на новый механизм отчетности о состоянии.</br>3. Поддержка обслуживания трафика GitHub из нескольких центров обработки данных по схеме «активный/активный/активный».</br>4. Более активная позиция при проверке наших предположений.</br>Организационные инициативы - системная практика проверки сценариев сбоев, прежде чем они возникнут в реальности
